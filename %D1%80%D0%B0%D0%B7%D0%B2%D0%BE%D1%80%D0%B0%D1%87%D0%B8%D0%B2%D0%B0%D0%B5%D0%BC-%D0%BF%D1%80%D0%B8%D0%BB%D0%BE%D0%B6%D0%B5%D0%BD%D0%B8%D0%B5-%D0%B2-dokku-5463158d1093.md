Unknown markup type 10 { type: [33m10[39m, start: [33m26[39m, end: [33m50[39m }
Unknown markup type 10 { type: [33m10[39m, start: [33m33[39m, end: [33m57[39m }

# –†–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≤ Dokku



TL;DR; git push dokku master –∏ –≤ –ø—Ä–æ–¥–∞–∫—à–µ–Ω. –ë—ã—Å—Ç—Ä—ã–π —Å–ø–æ—Å–æ–± –ø–µ—Ä–µ–µ—Ö–∞—Ç—å —Å Heroku –Ω–∞ Dokku —Å –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–µ–π.

## –ß—Ç–æ —Ç–∞–∫–æ–µ Dokku?

![](https://cdn-images-1.medium.com/max/2000/1*36RITiNy_SxiOHaliYOlig.png)

–í—Å–µ –º—ã –∑–Ω–∞–µ–º, —á—Ç–æ Heroku —É–¥–æ–±–µ–Ω –∏ –ø—Ä–æ—Å—Ç, –Ω–æ –≤–æ—Ç –µ–≥–æ dynos –º–µ–¥–ª–µ–Ω–Ω—ã –≤ –±–µ—Å–ø–ª–∞—Ç–Ω–æ–º —Ä–µ–∂–∏–º–µ —Ä–æ–≤–Ω–æ –Ω–∞ —Å—Ç–æ–ª—å–∫–æ, –Ω–∞ —Å–∫–æ–ª—å–∫–æ –æ–Ω–∏ –¥–æ—Ä–æ–≥–∏ –≤ –ø–ª–∞—Ç–Ω–æ–º.

–û—Ç—á–∞—Å—Ç–∏ –ø–æ—ç—Ç–æ–º—É –±—ã–ª —Å–æ–∑–¥–∞–Ω Dokku ‚Äî –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π PaaS –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—Ç–µ–ª –±—ã –ø–µ—Ä–µ–µ—Ö–∞—Ç—å —Å Heroku –Ω–∞ —á—Ç–æ-—Ç–æ –±–æ–ª–µ–µ –≤–º–µ–Ω—è–µ–º–æ–µ –ø–æ —Ü–µ–Ω–µ. –ó–¥–µ—Å—å –Ω–µ –±—É–¥–µ—Ç —Ä–∞—Å—Å–º–æ—Ç—Ä–µ–Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø–ª–∞–≥–∏–Ω–æ–≤ –∏ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö. –ê–≤—Ç–æ—Ä –∏—Å—Ö–æ–¥–∏—Ç –∏–∑ —Ç–æ–≥–æ, —á—Ç–æ –≤—ã —É–∂–µ –∑–Ω–∞–µ—Ç–µ —á—Ç–æ —Ç–∞–∫–æ–µ nodejs –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ, —É –≤–∞—Å –µ—Å—Ç—å Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ package.json —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏ –∏ —Å–∫—Ä–∏–ø—Ç–∞–º–∏ –∑–∞–ø—É—Å–∫–∞.

### –ù–∞—á–Ω–µ–º!

–ù–∞–º –ø–æ—Ç—Ä–µ–±—É–µ—Ç—Å—è:

1. –≤–∏—Ä—Ç—É–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞

1. —Ç–µ—Ä–º–∏–Ω–∞–ª (–≤ –º–æ–µ–º —Å–ª—É—á–∞–µ iterm –∏ mac os x)

1. –≥–æ—Ç–æ–≤—ã–π –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø—É–±–ª–∏—á–Ω—ã–π SSH –∫–ª—é—á ([–∫–∞–∫ —Å–æ–∑–¥–∞—Ç—å](https://confluence.atlassian.com/bitbucketserver/creating-ssh-keys-776639788.html))

### **1. –°–æ–µ–¥–∏–Ω—è–µ–º—Å—è —Å –≤–∞—à–∏–º —Å–µ—Ä–≤–µ—Ä–æ–º —á–µ—Ä–µ–∑ ssh**

–û —Ç–æ–º, –∫–∞–∫ —ç—Ç–æ —Å–¥–µ–ª–∞—Ç—å, –ª—É—á—à–µ –ø—Ä–æ—á–µ—Å—Ç—å –≤ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –≤–∞—à–µ–≥–æ —Ö–æ—Å—Ç–∏–Ω–≥ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞, –∫–∞–∫ –ø—Ä–∞–≤–∏–ª–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–π –º–∞—à–∏–Ω—ã –≤–∞—Å –ø–æ–ø—Ä–æ—Å—è—Ç —É–∫–∞–∑–∞—Ç—å credentials –∏ –∑–∞—á–∞—Å—Ç—É—é –Ω–∞ —ç—Ç–æ–º —à–∞–≥–µ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ ssh –∫–ª—é—á–∞ –∏–ª–∏ —Å–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–≥–æ.

    ssh your-user@<server-ip>

–î–∞–ª–µ–µ –≤–≤–æ–¥–∏–º –ø–∞—Ä–æ–ª—å –æ—Ç –≤–∞—à–µ–≥–æ –∫–ª—é—á–∞ (–µ—Å–ª–∏ –≤—ã —É—Å—Ç–∞–Ω–æ–≤–∏–ª–∏ –µ–≥–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∫–ª—é—á–∞)

### **2.** **–°—Ç–∞–≤–∏–º Dokku**

–û–±–Ω–æ–≤–ª—è–µ–º –ø–∞–∫–µ—Ç—ã (—è –∏—Å–ø–æ–ª—å–∑—É—é Ubuntu 16.04)

    sudo apt-get update && sudo apt-get upgrade

–ö–∞—á–∞–µ–º —Å–∫—Ä–∏–ø—Ç

    wget https://raw.githubusercontent.com/dokku/dokku/v0.11.1/bootstrap.sh

–ó–∞–ø—É—Å–∫–∞–µ–º —Å–∫—Ä–∏–ø—Ç —É—Å—Ç–∞–Ω–æ–≤–∫–∏

    sudo DOKKU_TAG=v0.11.1 bash bootstrap.sh

–î–∞–ª–µ–µ dokku –ø–æ–¥–Ω–∏–º–µ—Ç web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ —Å–µ—Ä–≤–µ—Ä–∞

3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º dokku —Å–µ—Ä–≤–µ—Ä

–ó–∞—Ö–æ–¥–∏–º –ø–æ –∞–¥—Ä–µ—Å—É http://<server-ip> –∏ –ø–æ–ø–∞–¥–∞–µ–º –≤ –≤–µ–± –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∏. –ó–¥–µ—Å—å –≤–∞–º –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ

1. –í—Å—Ç–∞–≤–∏—Ç—å –≤ –≤–µ—Ä—Ö–Ω–µ–µ –ø–æ–ª–µ —Å–≤–æ–π –ø—É–±–ª–∏—á–Ω—ã–π ssh –∫–ª—é—á

1. –î–æ–±–∞–≤–∏—Ç—å –¥–æ–º–µ–Ω (–Ω–∞ —Å–∞–º–æ–º –¥–µ–ª–µ —Ç–∞–∫ –Ω–∞–º–Ω–æ–≥–æ —É–¥–æ–±–Ω–µ–µ, —Ç–∞–∫ –∫–∞–∫ dokku –Ω–∞—á–Ω–µ—Ç –ø–æ–¥–Ω–∏–º–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ –∞–¥—Ä–µ—Å—É <app-name>.your-domain.com –∏ —É –≤–∞—Å –Ω–µ –±—É–¥–µ—Ç –ø—Ä–æ–±–ª–µ–º —Å —Ä–æ—É—Ç–∏–Ω–≥–æ–º –≤ PWA –∏–ª–∏ –¥—Ä—É–≥–∏—Ö –∫–ª–∏–µ–Ω—Ç—Å–∫–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è—Ö, –ø. 3 –Ω–∏–∂–µ)

1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É –≤–Ω–∏–∑—É —Å—Ç—Ä–∞–Ω–∏—Ü—ã.

### 3. –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –¥–æ–º–µ–Ω–Ω–æ–µ –∏–º—è

–ï—Å–ª–∏ –≤—ã –Ω–µ –∑–Ω–∞–µ—Ç–µ –∫–∞–∫ –ø—Ä–∏–≤—è–∑–∞—Ç—å –¥–æ–º–µ–Ω, —Ç–æ –µ—Å—Ç—å –ø—Ä–æ—Å—Ç–æ–π —Å–ø–æ—Å–æ–± ‚Äî –¥–æ–±–∞–≤—å—Ç–µ A –∑–∞–ø–∏—Å—å –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –¥–æ–º–µ–Ω–∞

    A @ <server-ip>

–ê —Ç–∞–∫–∂–µ –¥–ª—è –ø–æ–¥–¥–æ–º–µ–Ω–æ–≤

    A * <server-ip>

–í—Å–µ, –≤–∞—à –¥–æ–º–µ–Ω —Å–º–æ—Ç—Ä–∏—Ç –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä.

### 4. –°–æ–∑–¥–∞–µ–º –≤–∞—à –ø–µ—Ä–≤—ã–π app

–ï—Å–ª–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ —Å —Å–µ—Ä–≤–µ—Ä–æ–º –±—ã–ª–æ —Ä–∞–∑–æ—Ä–≤–∞–Ω–æ, –∑–∞ –≤—Ä–µ–º—è –ø–æ–∫–∞ –≤—ã –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–ª–∏ Dokku, —Ç–æ –≤–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –ø.1 –∏ –∑–∞–ª–æ–≥–∏–Ω—å—Ç–µ—Å—å —á–µ—Ä–µ–∑ ssh.

–°–æ–∑–¥–∞–µ–º Dokku –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

    dokku apps:create <your-app-name>

–í—Å–µ, –±–æ–ª—å—à–µ –Ω–∏—á–µ–≥–æ –¥–µ–ª–∞—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –Ω—É–∂–Ω–æ, –ø—Ä–∏ —É—Å–ª–æ–≤–∏–∏, —á—Ç–æ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö, –µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç, —Ç–æ –ø—Ä–æ—á—Ç–∏—Ç–µ –≥–ª–∞–≤—É –æ [–Ω–∞—Å—Ç—Ä–æ–π–∫–µ –ø–ª–∞–≥–∏–Ω–æ–≤ Dokku](http://dokku.viewdocs.io/dokku/community/plugins/).

### 5. –î–µ–ø–ª–æ–∏–º

–û—Ç–∫—Ä—ã–≤–∞–µ–º –≤ —Ç–µ—Ä–º–∏–Ω–∞–ª–µ –≤–∞—à Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –∏ –¥–æ–±–∞–≤–ª—è–µ–º –≤ –Ω–µ–≥–æ –Ω–æ–≤—ã–π remote

    git remote add dokku dokku@<your-domain>.com:<your-app-name>

–†–∞–∑–±–µ—Ä–µ–º —Å—Ç—Ä–æ—á–∫—É –ø–æ–¥—Ä–æ–±–Ω–µ–µ:

–î–æ–±–∞–≤–ª—è–µ–º –Ω–æ–≤—ã–π remote —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π c –∏–º–µ–Ω–µ–º ‚Äúdokku‚Äù –≤ –≤–∞—à –ª–æ–∫–∞–ª—å–Ω—ã–π Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

    git remote add dokku

–£–∫–∞–∑—ã–≤–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, —Ö–æ—Å—Ç –∏ –∏–º—è –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å dokku –±—ã–ª —Å–æ–∑–¥–∞–Ω –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞ —ç—Ç–∞–ø–µ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ Dokku –≤ –ø—É–Ω–∫—Ç–µ 2.

    dokku@<your-domain>.com:<your-app-name>

### **6. Procfile**

–°–æ–∑–¥–∞–π—Ç–µ (–µ—Å–ª–∏ –≤—ã –µ—â–µ –Ω–µ —Å–æ–∑–¥–∞–ª–∏ –µ–≥–æ –¥–ª—è heroku)–≤ –∫–æ—Ä–Ω–µ –≤–∞—à–µ–≥–æ Git —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —Ñ–∞–π–ª Procfile –∏ –¥–æ–±–∞–≤—å—Ç–µ –≤ –Ω–µ–≥–æ –∫–æ–º–∞–Ω–¥—É –∑–∞–ø—É—Å–∫–∞ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è, –≤ –º–æ–µ–º —Å–ª—É—á–∞–µ —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ Procfile –≤—ã–≥–ª—è–¥–∏—Ç —Ç–∞–∫:

    web: npm run prod

–í—Å–µ –≥–æ—Ç–æ–≤–æ –∫ –¥–µ–ø–ª–æ—é

    git push dokku master

–ï—Å–ª–∏ –≤–∞—à ssh –∏–º–µ–µ—Ç –ø–∞—Ä–æ–ª—å, —Ç–æ –µ–≥–æ –Ω—É–∂–Ω–æ –±—É–¥–µ—Ç –≤–≤–µ—Å—Ç–∏ –Ω–∞ —Å–ª–µ–¥—É—é—â–µ–º —à–∞–≥–µ, –µ—Å–ª–∏ –Ω–µ—Ç, —Ç–æ–≥–¥–∞ –≤—ã —É–≤–∏–¥–∏—Ç–µ –ø—Ä–æ—Ü–µ—Å—Å —Å–±–æ—Ä–∫–∏ –≤–∞—à–µ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

### **7. –í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–æ–±–ª–µ–º—ã**

Build —É–ø–∞–ª –Ω–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–µ npm –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π ‚Äî –∑–∞–π–¥–∏—Ç–µ –Ω–∞ –≤–∞—à —Å–µ—Ä–≤–µ—Ä (–ø.1) –∏ –≤—ã–ø–æ–ª–Ω–∏—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–∫—É –≥–ª–æ–±–∞–ª—å–Ω–æ–π –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π –¥–ª—è –≤—Å–µ—Ö –≤–∞—à–∏—Ö –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

    dokku config:set --global NPM_USE_PRODUCTION=false

–ò–ª–∏ —Ç–æ–ª—å–∫–æ –¥–ª—è –æ–¥–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

    dokku config:set <your-app-name> NPM_USE_PRODUCTION=false

–ö–∞–∫ –ø—Ä–∞–≤–∏–ª–æ Heroku —Ç—Ä–µ–±—É–µ—Ç —Ç–æ –∂–µ —Å–∞–º–æ–µ, —Ç–æ–ª—å–∫–æ —É—Å—Ç–∞–Ω–æ–≤–∫–∞ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç—Å—è —á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 8. –£–¥–∞–ª–µ–Ω–∏–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–π

    dokku apps:destroy <your-app-name>

–ë–æ–ª–µ–µ –ø–æ–¥—Ä–æ–±–Ω–æ –≤ [Dokku Applications Managment](http://dokku.viewdocs.io/dokku/deployment/application-management/)

–ù–∞–¥–µ—é—Å—å —Å—Ç–∞—Ç—å—è –±—ã–ª–∞ –ø–æ–ª–µ–∑–Ω–∞, –≤ *—Å–ª–µ–¥—É—é—â–µ–π –æ–ø–∏—à—É —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–Ω–∏–µ Telegram –±–æ—Ç–∞ –Ω–∞ —Å–≤–æ–µ–º –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ —á–µ—Ä–µ–∑ Dokku.*
